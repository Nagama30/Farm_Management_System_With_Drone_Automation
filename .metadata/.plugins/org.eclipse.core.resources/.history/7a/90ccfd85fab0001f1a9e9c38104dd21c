package application;

import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class DashboardManager {
    private static DashboardManager instance; // Singleton instance
    private Stage dashboardStage;            // The single stage for the dashboard

    // Private constructor to prevent instantiation
    private DashboardManager() {}

    // Public method to get the single instance
    public static DashboardManager getInstance() {
        if (instance == null) {
            instance = new DashboardManager();
        }
        return instance;
    }

    public void showDashboard() {
        if (dashboardStage != null && dashboardStage.isShowing()) {
            // If the dashboard is already open, bring it to the front
            dashboardStage.toFront();
            return;
        }

        try {
            // Load the dashboard only if it is not already open
            FXMLLoader loader = new FXMLLoader(getClass().getResource("MainScene.fxml"));
            Parent root = loader.load();

            dashboardStage = new Stage();
            dashboardStage.setTitle("Farm Management Dashboard");
            Scene scene = new Scene(root, 1200, 800);
            dashboardStage.setScene(scene);

            // Set behavior for when the stage is closed
            dashboardStage.setOnCloseRequest(event -> dashboardStage = null);

            dashboardStage.show();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
